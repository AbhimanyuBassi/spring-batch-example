@Configuration
@EnableBatchProcessing
public class BatchConfig {

    @Autowired
    private JobBuilderFactory jobBuilderFactory;

    @Autowired
    private StepBuilderFactory stepBuilderFactory;

    @Autowired
    private JobLauncher jobLauncher;

    @Bean
    public Job job1() {
        return jobBuilderFactory.get("job1")
                .start(step1())
                .build();
    }

    @Bean
    public Step step1() {
        return stepBuilderFactory.get("step1")
                .tasklet((stepContribution, chunkContext) -> {
                    // job1 tasklet logic here
                    return RepeatStatus.FINISHED;
                }).build();
    }

    @Bean
    public Job job2() {
        return jobBuilderFactory.get("job2")
                .start(step2())
                .build();
    }

    @Bean
    public Step step2() {
        return stepBuilderFactory.get("step2")
                .tasklet((stepContribution, chunkContext) -> {
                    // job2 tasklet logic here
                    return RepeatStatus.FINISHED;
                }).build();
    }

    @Bean
    public CronTriggerFactoryBean job1Trigger() {
        CronTriggerFactoryBean cronTriggerFactoryBean = new CronTriggerFactoryBean();
        cronTriggerFactoryBean.setJobDetail(job1().build());
        cronTriggerFactoryBean.setCronExpression("0 0 1 * * ?"); // run at 1am every day
        return cronTriggerFactoryBean;
    }

    @Bean
    public CronTriggerFactoryBean job2Trigger() {
        CronTriggerFactoryBean cronTriggerFactoryBean = new CronTriggerFactoryBean();
        cronTriggerFactoryBean.setJobDetail(job2().build());
        cronTriggerFactoryBean.setCronExpression("0 0 2 * * ?"); // run at 2am every day
        return cronTriggerFactoryBean;
    }

    @Bean
    public SchedulerFactoryBean schedulerFactoryBean() {
        SchedulerFactoryBean schedulerFactoryBean = new SchedulerFactoryBean();
        schedulerFactoryBean.setTriggers(job1Trigger().getObject(), job2Trigger().getObject());
        return schedulerFactoryBean;
    }

}
